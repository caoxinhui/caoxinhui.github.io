---
title: ä½è¿ç®—
date: 2020-02-22 13:44:24
tags:
categories: ç®—æ³•
---

### ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼
```js
a = a ^ b
b = a ^ b
a = a ^ b
```

### ä¸ç”¨æ¯”è¾ƒæ‰¾åˆ°ä¸¤æ•°ä¸­è¾ƒå¤§çš„æ•°ï¼ˆ32ä½æ•´æ•°ï¼‰
```js
function flip(n) {
  return n ^ 1
}
function sign(number) {
  return flip((number >> 1) & 1)
}


function getBigger(a, b) {
  const c = a - b
  const signC = sign(c)
  const flipC = flip(signC)
  return a * signC + b * flipC
}

```

### ä¸ç”¨æ¯”è¾ƒæ‰¾åˆ°ä¸¤æ•°ä¸­è¾ƒå¤§çš„æ•°
ğŸ‘‡å¦‚æœaçš„ç¬¦å·å’Œbçš„ç¬¦å·ä¸åŒï¼Œ(difSignAB=1,sameSignAB=0)
- å¦‚æœaä¸ºæ­£ï¼Œbä¸ºè´Ÿ(signA=1,signB=0)ï¼Œè¿”å›a
- å¦‚æœaä¸ºè´Ÿï¼Œbä¸ºæ­£(signA=0,signB=1)ï¼Œè¿”å›b
ğŸ‘‡å¦‚æœaçš„ç¬¦å·å’Œbçš„ç¬¦å·ç›¸åŒï¼Œ(difSignAB=0,sameSignAB=1)
- å¦‚æœa-bä¸ºæ­£ï¼ŒsignC=1ï¼Œè¿”å›a
- å¦‚æœa-bä¸ºè´Ÿï¼ŒsignC=0ï¼Œè¿”å›b
```js
function flip(n) {
  return n ^ 1
}
function sign(number) {
  return flip((number >> 1) & 1)
}

function getBigger(a, b) {
  const c = a - b
  const signA = sign(a)
  const signB = sign(b)
  const signC = sign(c)
  const difSignAB = signA ^ signB
  const sameSignAB = flip(difSignAB)
  const returnA = difSignAB * signA + sameSignAB * signC
  const returnB = flip(returnA)
  return a * returnA + b * returnB
}
```

### ä½è¿ç®—ç¬¦å®ç°åŠ å‡ä¹˜é™¤
#### åŠ 
- åœ¨å®Œå…¨ä¸è€ƒè™‘è¿›ä½çš„æƒ…å†µä¸‹ï¼Œa^bå°±æ˜¯æ­£ç¡®ç»“æœ
- åœ¨åªç®—è¿›ä½çš„æƒ…å†µä¸‹ï¼Œè¿›ä½(a&b)<<1
- æŠŠå®Œå…¨ä¸è€ƒè™‘è¿›ä½çš„ç›¸åŠ å€¼ä¸åªè€ƒè™‘è¿›ä½çš„äº§ç”Ÿå€¼å†ç›¸åŠ ï¼Œå°±æ˜¯æœ€ç»ˆç»“æœ
```js
function add(a, b) {
  let sum = a
  while (b !== 0) {
    sum = a ^ b
    b = (a & b) << 1
    a = sum
  }
  return sum
}
```

#### å‡
å®ç°a-båªè¦å®ç°a+(-b)å³å¯ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°çš„ç›¸åæ•°ï¼Œå°±æ˜¯è¿™ä¸ªæ•°çš„äºŒè¿›åˆ¶æ•°è¡¨è¾¾å–ååŠ ä¸€çš„ç»“æœã€‚
```js
function negNum(n) {
  return add(~n, 1)
}

function minus(a, b) {
  return add(a, negNum(b))
}
```
#### ä¹˜
a * b = a * 2^0 * b0 + a * 2^1 * b1 + â€¦â€¦ + a * 2^i * bi + a * 2^31 * b31 
- bæœ€å³ä¾§ä¸º1æ—¶ï¼Œres = res + aï¼ŒåŒæ—¶bå³ç§»1ä½ï¼Œaå·¦ç§»ä¸€ä½
- bæœ€å³ä¾§ä¸º0æ—¶ï¼Œresä¸å˜ï¼ŒåŒæ—¶bå³ç§»1ä½ï¼Œaå·¦ç§»ä¸€ä½
```js
function multi(a, b) {
  let res = 0
  while (b !== 0) {
    if ((b & 1) !== 0) {
      res = add(res, a)
    }
    a <<= 1
    b >>= 1
  }
  return res
}
```

#### é™¤

```js
function isNeg(n) {
  return n < 0
}

function div(a, b) {
  let x = isNeg(a) ? negNum(a) : a
  let y = isNeg(b) ? negNum(b) : b
  let res = 0
  for (let i = 31; i > -1; i = minus(i, 1)) {
    if ((x >> i) >= y) {
      res |= (1 << i)
      x = minus(x, y << i)
    }
  }
  return isNeg(a) ^ isNeg(b) ? negNum(res) : res
}
```

```js
function isNeg(n) {
  return n < 0
}

function div(a, b) {
  let x = isNeg(a) ? negNum(a) : a
  let y = isNeg(b) ? negNum(b) : b
  let res = 0
  for (let i = 31; i > -1; i = minus(i, 1)) {
    if ((x >> i) >= y) {
      res |= (1 << i)
      x = minus(x, y << i)
    }
  }
  return isNeg(a) ^ isNeg(b) ? negNum(res) : res
}

function divide(a, b) {
  if (b === 0) {
    throw new Error('divisor is 0')
  }
  if (a === Number.MAX_SAFE_INTEGER && b === Number.MIN_SAFE_INTEGER) {
    return 1
  } else if (b === Number.MIN_SAFE_INTEGER) {
    return 0
  } else if (a === Number.MIN_SAFE_INTEGER) {
    let res = div(add(a, 1), b)
    return add(res, div(minus(a, multi(res, b)), b))
  } else {
    return div(a, b)
  }
}
```

### äºŒè¿›åˆ¶è¡¨è¾¾å¼æœ‰å¤šå°‘1

```js
function count1(n) {
  let res = 0
  while (n !== 0) {
    res += n & 1
    n >>= 1
  }
  return res
}
```
n &= (n - 1) æ“ä½œï¼Œæ˜¯æŠ¹æ‰æœ€å³è¾¹çš„1

```js
function count2(n) {
  let res = 0
  while (n !== 0) {
    // æŠ¹æ‰æœ€å³è¾¹çš„1
    n &= (n - 1)
    res++
  }
  return res                              
}
```

```js
function count3(n) {
  let res = 0
  while (n !== 0) {
    n -= n & (~n + 1)
    res++
  }
  return res
}

```

### åœ¨å…¶ä»–æ•°éƒ½å‡ºç°å¶æ•°æ¬¡çš„æ•°ç»„ä¸­æ‰¾åˆ°å‡ºç°å¥‡æ•°æ¬¡çš„æ•°
éå†æ•°ç»„ï¼Œå¯¹æ¯ä¸ªæ•°å¼‚æˆ–ï¼Œæœ€åçš„å€¼å°±æ˜¯å‡ºç°å¥‡æ•°æ¬¡çš„é‚£ä¸ªæ•°ã€‚å¼‚æˆ–æ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹ã€‚åƒä¸ªç›¸åŒçš„æ•°å¼‚æˆ–ä¹‹åä¸º0
```js
function oddTimesNum(arr) {
  let res = 0
  for (let i = 0; i < arr.length; i++) {
    res ^= arr[i]
  }
  return res
}

```


### æœ‰ä¸¤ä¸ªæ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œæ‰“å°è¿™ä¸¤ä¸ªæ•°
```js
function printOddTimesNum(arr) {
  let e0 = 0
  let e0hasOne = 0
  for (let i = 0; i < arr.length; i++) {
    e0 ^= arr[i]
  }
  let rightOne = e0 & (~e0 + 1)
  for (let i = 0; i < arr.length; i++) {
    if ((arr[i] & rightOne) !== 0) {
      e0hasOne ^= arr[i]
    }
  }
  const annother = e0 ^ e0hasOne
  return { annother, e0hasOne }
}
```
### å…¶ä»–æ•°å­—éƒ½å‡ºç°kæ¬¡çš„æ•°ç»„ä¸­æ‰¾åˆ°åªå‡ºç°ä¸€æ¬¡çš„æ•°
kè¿›åˆ¶çš„ä¸¤ä¸ªæ•°ï¼Œåœ¨iä½ä¸Šæ— è¿›ä½ç›¸åŠ çš„ç»“æœå°±æ˜¯(c(i)+d(i))%k,é‚£ä¹ˆå¦‚æœkä¸ªç›¸åŒçš„kè¿›åˆ¶æ•°è¿›è¡Œæ— è¿›ä½ç›¸åŠ ï¼Œç›¸åŠ çš„ç»“æœä¸€å®šæ˜¯æ¯ä¸€ä½ä¸Šéƒ½æ˜¯0çš„kè¿›åˆ¶æ•°