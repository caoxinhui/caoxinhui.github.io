---
title: æœ€é•¿é€’å¢å­åºåˆ—
date: 2020-02-19 14:25:26
tags:
categories: ç®—æ³•
---

ç”Ÿæˆé•¿åº¦ä¸º N çš„æ•°ç»„dpï¼Œdp[i]è¡¨ç¤ºåœ¨arr[i] è¿™ä¸ªæ•°ç»“å°¾çš„æƒ…å†µä¸‹ï¼Œarr[0â€¦i] ä¸­çš„æœ€é•¿é€’å½’å­åºåˆ—

å¦‚æœæœ€é•¿é€’å½’å­åºåˆ—ä»¥arr[i]ç»“å°¾ï¼Œé‚£ä¹ˆåœ¨arr[0â€¦i]ä¸­æ‰€æœ‰æ¯”arr[i]å°çš„æ•°ï¼Œéƒ½å¯ä»¥ä½œä¸ºå€’æ•°ç¬¬äºŒä¸ªæ•°ã€‚åœ¨è¿™ä¹ˆå¤šå€’æ•°ç¬¬äºŒä¸ªæ•°çš„é€‰æ‹©ä¸­ï¼Œä»¥å“ªä¸ªæ•°ç»“å°¾çš„æœ€å¤§é€’å¢å­åºåˆ—æ›´å¤§ï¼Œå°±é€‰å“ªä¸ªæ•°ä½œä¸ºå€’æ•°ç¬¬äºŒä¸ªæ•°ã€‚

<!-- more -->

### æ–¹æ³•ä¸€

``` js
const arr = [2, 1, 5, 3, 6, 4, 8, 9, 7]

function increNum(arr) {
    const len = arr.length
    let dp = Array(len)
    for (let i = 0; i < len; i++) {
        dp[i] = 1
        for (let j = 1; j < i; j++) {
            if (arr[i] > arr[j]) {
                dp[i] = Math.max(dp[i], dp[j] + 1)
            }
        }
    }
    return dp
}
```

æ¥ä¸‹æ¥æ ¹æ®dpï¼Œæ±‚å‡ºdpçš„æœ€é•¿é€’å¢å­åºåˆ—

1. æ‰¾åˆ° dp ä¸­çš„æœ€å¤§å€¼çš„ä½ç½® index
2. ä» index å‘å·¦éå†ï¼Œå¦‚æœæ—¢æœ‰ arr[index] > arr[i], åˆæœ‰ dp[i] + 1 = dp[index], i å³ä¸ºæ‰€æ±‚

``` js
function generateLIS(arr, dp) {
    // æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦
    let len = 0
    // æœ€å¤§å€¼æ‰€åœ¨ä½ç½®
    let index = 0
    for (let i = 0; i < dp.length; i++) {
        if (dp[i] > len) {
            index = i
            len = dp[i]
        }
    }
    let lis = Array(len)
    lis[--len] = arr[index]
    for (let i = index; i >= 0; i--) {
        if (arr[i] < arr[index] && dp[i] + 1 === dp[index]) {
            lis[--len] = arr[i]
            index = i
        }
    }
    return lis
}

function list(arr) {
    if (!arr || arr.length === 0) {
        return null
    }
    const dp = increNum(arr)
    return generateLIS(arr, dp)
}
```

è®¡ç®—dpæ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ï¼ŒgenerateLISæ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œæ‰€ä»¥æ•´ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)

### æ–¹æ³•äºŒ
ğŸ˜“ **æœªå®Œæˆ**
é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ¥è¿›è¡Œä¼˜åŒ–ã€‚æ—¶é—´å¤æ‚åº¦O(NlogN)

1. å…ˆç”Ÿæˆé•¿åº¦ä¸º N çš„æ•°ç»„ endsï¼Œåˆå§‹æ—¶ ends[0] = arr[0]ï¼Œå…¶ä»–ä½ç½®ä¸Šçš„å€¼ä¸º 0
2. ç”Ÿæˆæ•´å‹å˜é‡rightï¼Œåˆå§‹æ—¶right = 0
3. ends[0â€¦right] ä¸ºæœ‰æ•ˆåŒºï¼Œends[right+1â€¦N-1] ä¸ºæ— æ•ˆåŒº
4. å¯¹æœ‰æ•ˆåŒºä¸Šçš„ä½ç½®bï¼Œå¦‚æœæœ‰ ends[b] == cï¼Œè¡¨ç¤ºåˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨æ‰€æœ‰é•¿åº¦ä¸ºb+1çš„é€’å¢åºåˆ—ä¸­ï¼Œæœ€å°çš„ç»“å°¾æ•°ä¸ºc

```js

function increNum(arr) {
  const len = arr.length
  let dp = Array(len)
  let ends = Array(len)
  ends[0] = arr[0]
  dp[0] = 1
  let right = 0
  let l = 0
  let r = 0
  let m = 0
  for (let i = 1; i < len; i++) {
    l = 0;
    r = right
    while (l <= r) {
      m = Math.floor((l + r) / 2)
      if (arr[i] > ends[m]) {
        l = m + l
      } else {
        l = m - l
      }
    }
    right = Math.max(right, l)
    ends[l] = arr[i]
    dp[i] = l + 1
  }
  return dp
}
```