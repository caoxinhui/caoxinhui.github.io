---
title: 项目总结
date: 2020-01-10 18:02:54
tags:
---

### 背景
当业务发展到达某一程度，有限的开发人力和冗长的开发流程无法满足蓬勃发展的业务需求。如果完全依靠传统的开发模式，唯有通过加班来解决。

### 方向
目标用户是各个事业部的运营，搭建页面的操作应该是”傻瓜式“的，即不用懂任何技术相关的知识就能完成一个页面的搭建。他是一个页面搭建平台，同时也是一个活动发布平台，可以便捷地点击发布按钮更新页面

### 活动页搭建
所见即所得的操作模式，提供各种组件，通过组合配置出落地页。

- 可视化配置界面： 通过配置写入数据库
- 接口系统：读取写入数据库的内容信息
- 前端：根据接口下发的内容展示页面

### 项目特点

### 项目难点
- 高度占位，防止楼层坍塌以及忽然出现的现象
> 采用dangerouslySetInnerHTML,页面挂载的时候计算屏幕宽度，计算图片应该展示的高度。保证精确占位
- 采用服务端渲染，减少首屏渲染时间
- 锚点导航，动态计算页面需要滚动的高度
> 对于某些楼层来说（比如产品列表），由于不确定返回的产品数量，占位高度不准确。监听一个全局状态，当全局状态改变后，重新计算需要滚动的距离，并进行滚动。需要在componentDidMount之后执行。或者也可以用setTimeout，在render之后执行。
- 倒计时。使用requestAnimationFrame。
> 通过页面挂载的时间timestamp精准倒计时。防止setTimeout时间不准确的问题。同时，为了防止页面息屏之后，线程放缓的问题，通过监听visibilityChange事件，当页面重新可视时，请求服务接口，更新倒计时时间。


### 项目中有趣的bug
- 底部导航IOS双击，页面下滑
- safari浏览器把加个默认成电话号码，使得文字颜色改变为黑色